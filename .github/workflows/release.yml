name: ğŸš€ Release

on:
    push:
        branches:
            - main
            - develop

jobs:
    release:
        runs-on: ubuntu-latest
        name: Semantic Release

        steps:
            -   name: Checkout repository
                uses: actions/checkout@v4
                with:
                    fetch-depth: 0

            -   name: âš™Setup Node.js
                uses: actions/setup-node@v4
                with:
                    node-version: 22
                    cache: npm

            -   name: Install dependencies
                run: npm ci

            -   name: Build project (optional)
                run: npm run build --if-present

            -   name: Run tests
                run: npm test --if-present

            -   name: ğŸ·ï¸ Release version
                env:
                    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
                run: npx semantic-release --branches develop,main
